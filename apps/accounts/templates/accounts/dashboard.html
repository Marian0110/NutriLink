{% extends 'base.html' %}
{% load static %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="container-dash">
    <div class="row mb-4">
        <!-- Gráficos (70%) -->
        <div class="col-lg-7 mt-3" >
            <div class="encabezado-dash">
                <div class="card-body" style="padding: 15px;">
                    <div>
                        <h4 id="saludo-nutricionista" class="mb-1"><i class="fas fa-heartbeat me-2"></i>Bienvenido/a, <span id="nombre-nutricionista" class="me-3">Cargando...</span></h4>
                        <p class="mb-0">NutriLink - Tu sistema de gestión nutricional</p>
                    </div>
                </div>
            </div>
            <h4 class="mt-4">Resumen pacientes</h4>
            <div class="row mt-4">
                <div class="col-md-6 mb-4">
                    <div class="graph-placeholder" id="total-pacientes" >
                        <!-- Card para total de pacientes -->
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="graph-placeholder" id="total-minutas" >
                        <!-- Card para total de minutas -->
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-md-6 mb-4">
                    <div class="graph-placeholder" id="grafico-genero" >
                        <!-- Gráfico de género dinámico -->
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="graph-placeholder" id="grafico-edad">
                        <!-- Gráfico de edad dinámico-->
                    </div>
                </div>
            </div>
            <h4 class="mt-4">Resumen de Minutas</h4>
            <div class="row mt-4">
                <div class="col-12">
                    <div class="graph-placeholder" style="min-height: 400px;" id="grafico-detallado">
                        <!-- Gráfico de evolución de minutas por mes -->
                    </div>
                </div>
            </div>
        </div>
        <!-- Columna derecha (30% - Citas) -->
        <div class="col-lg-5 mt-3">
            <div class="card-citas-del-dia">
                <div class="card-header-citas">
                    <h5 class="mb-0"><i class="far fa-calendar-alt me-2"></i>Tus citas de hoy</h5>
                    <div class="form-text text-muted mt-2">
                        <i class="fas fa-info-circle me-1"></i>Puedes cancelar o marcar como completada una cita desde la sección Agenda.
                    </div>
                </div>
                <div class="card-body mt-2" id="citas-container">
                    <!-- Las citas se generan dinámicamente -->
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<!--CDN ultima versión de plotly-->
<script src="https://cdn.plot.ly/plotly-3.0.1.min.js" charset="utf-8"></script>
<script src="{% static 'accounts/js/dashboard.js' %}"></script>
{% endblock %}